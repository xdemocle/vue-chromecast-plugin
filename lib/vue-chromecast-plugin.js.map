{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 23ee064c7b4f1dfec913","webpack:///./src/index.js","webpack:///./src/utils.js","webpack:///./src/chromecast-sdk.js"],"names":["install","Vue","options","$chromecast","applicationId","applicationName","applicationNamespace","VueEvents","Events","prototype","$events","checkIfChromecast","Receiver","Sender","$on","eventName","eventHandler","methods","emit","event","args","$emit","on","callback","off","$off","navigator","userAgent","indexOf","window","chrome","cast","console","log","params","session","initialize","isAvailable","setTimeout","constructor","sessionRequest","SessionRequest","apiConfig","ApiConfig","sessionListener","availabilityListener","onInitSuccess","onError","e","message","JSON","stringify","code","sessionId","addUpdateListener","sessionUpdateListener","isAlive","sessionStatus","sendMessage","onSuccess","bind","requestSession","stop","receiver","logger","setLevelValue","castReceiverManager","CastReceiverManager","getInstance","onReady","data","setApplicationState","onSenderConnected","senderId","onSenderDisconnected","messageBus","getCastMessageBus","CastMessageBus","MessageType","onMessage","method","start","statusText"],"mappings":"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","file":"vue-chromecast-plugin.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vue-chromecast-plugin\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vue-chromecast-plugin\"] = factory();\n\telse\n\t\troot[\"vue-chromecast-plugin\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 23ee064c7b4f1dfec913","import Utils from './utils';\nimport { Sender, Receiver } from './chromecast-sdk';\n\nexport default {\n  install(Vue, options) {\n    const $chromecast = {};\n    const { applicationId, applicationName, applicationNamespace } = options;\n\n    const VueEvents = new Utils.Events(Vue);\n\n    Sender.prototype.$events = VueEvents.$events;\n    Receiver.prototype.$events = VueEvents.$events;\n\n    if (Utils.checkIfChromecast()) {\n      $chromecast.Receiver = new Receiver({\n        applicationName,\n        applicationNamespace\n      });\n    } else {\n      $chromecast.Sender = new Sender({\n        applicationId,\n        applicationNamespace\n      });\n    }\n\n    $chromecast.$on = (eventName, eventHandler) => {\n      VueEvents.$events.$on(eventName, eventHandler);\n    };\n\n    // Register the vue plugin\n    Vue.prototype.$chromecast = $chromecast;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","class Events {\n  constructor(Vue) {\n    this.$events = new Vue({\n      methods: {\n        /**\n         * Emit the given event.\n         *\n         * @param {string|object} event\n         * @param {...*} args\n         */\n        emit(event, ...args) {\n          this.$emit(event, ...args);\n        },\n\n        /**\n         * Listen for the given event.\n         *\n         * @param {string} event\n         * @param {function} callback\n         */\n        on(event, callback) {\n          this.$on(event, callback);\n        },\n\n        /**\n         * Remove one or more event listeners.\n         *\n         * @param {string} event\n         * @param {function} callback\n         */\n        off(event, callback) {\n          this.$off(event, callback);\n        }\n      }\n    });\n  }\n}\n\nfunction checkIfChromecast() {\n  return navigator.userAgent.indexOf('CrKey') !== -1;\n}\n\nexport default { Events, checkIfChromecast };\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","const { chrome, cast } = window;\nconst { log } = console;\n\nclass Sender {\n  constructor(params) {\n    this.log = log;\n    this.session = null;\n    this.params = params;\n\n    this.initialize();\n  }\n\n  initialize() {\n    if (!chrome.cast || !chrome.cast.isAvailable) {\n      setTimeout(() => {\n        this.constructor(this.params);\n      }, 150);\n      return;\n    }\n\n    this.sessionRequest = new chrome.cast.SessionRequest(this.params.applicationId);\n\n    this.apiConfig = new chrome.cast.ApiConfig(\n      this.sessionRequest,\n      () => this.sessionListener,\n      () => this.availabilityListener\n    );\n\n    chrome.cast.initialize(\n      this.apiConfig,\n      () => this.onInitSuccess,\n      () => this.onError\n    );\n  }\n\n  onInitSuccess(e) {\n    this.$events.$emit('onInitSuccess', e);\n  }\n\n  onError(message) {\n    this.log(`onError: ${JSON.stringify(message)}`);\n\n    if (message.code) {\n      this.$events.$emit('sessionUpdate', message.code);\n    }\n  }\n\n  onSuccess(message) {\n    this.log(`onSuccess: ${JSON.stringify(message)}`);\n\n    if (message.callback) {\n      message.callback();\n    }\n  }\n\n  sessionListener(e) {\n    this.log(`New session ID: ${e.sessionId}`);\n    this.session = e;\n    this.session.addUpdateListener(() => this.sessionUpdateListener);\n\n    this.$events.$emit('sessionUpdate', 'new');\n  }\n\n  sessionUpdateListener(isAlive) {\n    const sessionStatus = isAlive ? 'updated' : 'removed';\n\n    this.log(`Session ${sessionStatus}: ${this.session.sessionId}`);\n\n    if (!isAlive) {\n      this.session = null;\n    }\n\n    this.$events.$emit('sessionUpdate', sessionStatus);\n  }\n\n  availabilityListener(e) {\n    this.$events.$emit('availabilityListener', e);\n  }\n\n  sendMessage(message) {\n    if (this.session !== null) {\n      this.session.sendMessage(\n        this.params.applicationNamespace,\n        message,\n        this.onSuccess.bind(this, message),\n        this.onError\n      );\n    } else {\n      chrome.cast.requestSession((e) => {\n        this.session = e;\n        this.sessionListener(e);\n        this.session.sendMessage(\n          this.params.applicationNamespace,\n          message,\n          this.onSuccess.bind(this, message),\n          this.onError\n        );\n      }, this.onError);\n    }\n  }\n\n  cast(callback) {\n    this.sendMessage({ callback });\n  }\n\n  stopCasting(callback) {\n    if (this.session) {\n      this.session.stop(callback, this.onError);\n    } else if (callback) {\n      callback();\n    }\n  }\n}\n\nclass Receiver {\n  constructor(params) {\n    this.log = log;\n    this.params = params;\n    this.initialize();\n  }\n\n  initialize() {\n    if (!cast || !cast.receiver) {\n      setTimeout(() => {\n        this.constructor();\n      }, 150);\n      return;\n    }\n\n    cast.receiver.logger.setLevelValue(0);\n\n    this.castReceiverManager = cast.receiver.CastReceiverManager.getInstance();\n\n    this.log('Starting Receiver Manager');\n\n    this.castReceiverManager.onReady = (event) => {\n      this.log(`Received Ready event: ${JSON.stringify(event.data)}`);\n      this.castReceiverManager.setApplicationState(`${this.params.applicationName} is ready...`);\n    };\n\n    this.castReceiverManager.onSenderConnected = (event) => {\n      this.log(`Received Sender Connected event: ${event.senderId}`);\n    };\n\n    this.castReceiverManager.onSenderDisconnected = (event) => {\n      this.log(`Received Sender Disconnected event: ${event.senderId}`);\n    };\n\n    this.messageBus = this.castReceiverManager.getCastMessageBus(\n      this.params.applicationNamespace,\n      cast.receiver.CastMessageBus.MessageType.JSON\n    );\n\n    this.messageBus.onMessage = (event) => {\n      this.log(`Message [${event.senderId}]: ${event.data}`);\n\n      if (event.data.method) {\n        this.$events.$emit('message', JSON.stringify(event.data));\n      }\n    };\n\n    // Initialize the CastReceiverManager with an application status message.\n    this.castReceiverManager.start({ statusText: 'Application is starting' });\n\n    this.log('Receiver Manager started');\n  }\n}\n\nexport { Sender, Receiver };\n\n\n\n// WEBPACK FOOTER //\n// ./src/chromecast-sdk.js"],"sourceRoot":""}